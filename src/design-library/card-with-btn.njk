{% extends "design-library-base.njk" %}
{% set activePage = 'card-with-btn' %}

{% block componentContent %}
<div class="max-w-4xl mx-auto px-6 py-8">
    
    <!-- Page Title -->
    <h1 class="text-4xl font-bold text-gray-900 mb-8">Card - With Button</h1>

    <!-- Primary Example Block -->
    <div class="border border-gray-300 rounded-lg mb-8 overflow-hidden">
        <!-- Live Example -->
        <div class="p-20 bg-gray-100 flex justify-center items-center">
            
            <!-- Component Container -->
            <div class="relative w-full max-w-2xl py-10">
                
                <!-- 1. The Card Base (The Teal Box) -->
                <div class="sw-bg-green w-[500px] min-h-[420px] p-12 flex flex-col justify-center relative z-0 shadow-lg">
                    <div class="max-w-[280px]">
                        <h2 class="text-5xl font-extrabold text-white mb-8 leading-tight tracking-tight uppercase" style="font-family: 'Objektiv MK1', sans-serif;">
                            Grants & <br/>funding
                        </h2>
                        <p class="text-white text-lg font-medium leading-relaxed mb-8" style="font-family: 'Montserrat', sans-serif;">
                            We distribute funding to community clubs, volunteers, and athletes. Our grants team can support you with information.
                        </p>
                        
                        <!-- Button CTA -->
                        <button class="sw-button sw-button-start h-12 px-8 uppercase tracking-widest text-sm font-bold border-none">
                            Find out more
                        </button>
                    </div>
                </div>

                <!-- 2. The Slanted Image Overlay (Sits ON TOP of the card) -->
                <div class="absolute top-0 -right-4 w-auto h-full z-10 sw-image-overlay-slant shadow-2xl">
                    <div class="relative w-full h-full">
                        <img src="../img/card-layout-no-button-graphic.svg" alt="Rugby Players" class="object-cover w-full h-full">
                    </div>
                </div>

            </div>
        </div>
        
        <!-- React Code Tabs -->
        <div class="border-t border-gray-200">
            <div id="component1-code-tabs"></div>
        </div>
    </div>

    <!-- When to use this component -->
    <section class="mb-12">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">When to use this component</h2>
        <p class="text-gray-700 leading-relaxed mb-4">
            Use this featured card variant for high-impact sections on landing pages, such as the homepage or main service hubs. It is designed to draw the user's attention to a primary piece of content or a specific grant/funding opportunity.
        </p>
    </section>

    <!-- How it works -->
    <section class="mb-12">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">How it works</h2>
        <p class="text-gray-700 leading-relaxed mb-4">
            This component uses a layered composition where an image with a signature brand slant is positioned on top of a solid background card. Follow these structural rules:
        </p>
        
        <ul class="list-disc ml-6 space-y-2 text-gray-700 leading-relaxed mb-6">
            <li><strong>Sharp Corners:</strong> Unlike standard cards, this featured variant uses 0px border-radius (no rounded corners).</li>
            <li><strong>Z-Index Layering:</strong> The background card is <code>z-0</code> and the slanted image overlay is <code>z-10</code>.</li>
            <li><strong>Text Protection:</strong> Text must be contained within the left 50-60% of the card to prevent it from being obscured by the overlapping image.</li>
            <li><strong>Brand Slant:</strong> The image overlay uses a specific CSS <code>clip-path</code> to create the sharp, angled edge.</li>
            <li><strong>Typography:</strong> Use Objektiv MK1 Bold for headings in uppercase to maintain a high-impact editorial feel.</li>
        </ul>
    </section>

    <!-- Sport Wales Guidelines Box -->
    <section class="mb-12 bg-blue-50 border border-blue-200 rounded-lg p-6">
        <h2 class="text-2xl font-bold text-blue-900 mb-4">Sport Wales Guidelines</h2>
        <ul class="list-disc ml-6 space-y-2 text-blue-800 leading-relaxed">
            <li>Use the Sport Wales Teal (#299D91) for the background of featured cards.</li>
            <li>Primary CTA buttons within these cards should use Sport Wales Red (#E32434).</li>
            <li>Ensure image content is relevant and follows the "Active People" photography style.</li>
            <li>Headings should be short (max 3-4 words) to fit the specific text container size.</li>
        </ul>
    </section>

</div>

<style>
    .sw-image-overlay-slant {
        clip-path: polygon(25% 0%, 100% 0%, 75% 100%, 0% 100%);
    }
</style>

<script type="text/babel">
{% raw %}
const { useState } = React;

function CodeTabsComponent({ codeExamples, tabId }) {
    const [codeType, setCodeType] = useState('html');
    const getLanguageClass = (type) => {
        const languageMap = { html: 'language-html', css: 'language-css', react: 'language-jsx', tailwind: 'language-html' };
        return languageMap[type] || 'language-html';
    };

    React.useEffect(() => {
        if (window.hljs) {
            setTimeout(() => {
                const codeBlock = document.querySelector(`#${tabId}-code-block`);
                if (codeBlock) {
                    codeBlock.removeAttribute('data-highlighted');
                    codeBlock.className = getLanguageClass(codeType);
                    window.hljs.highlightElement(codeBlock);
                }
            }, 50);
        }
    }, [codeType, tabId]);

    return (
        <div>
            <div className="flex" role="tablist">
                {Object.keys(codeExamples).map((type) => (
                    <button key={type} onClick={() => setCodeType(type)} className={`px-4 py-3 text-sm font-semibold border-b-3 transition-all ${codeType === type ? 'border-blue-600 bg-white text-blue-600' : 'border-transparent bg-gray-100 text-gray-600 hover:bg-gray-200'}`}>
                        {type.toUpperCase()}
                    </button>
                ))}
            </div>
            <div className="bg-white relative">
                <button onClick={() => { navigator.clipboard.writeText(codeExamples[codeType]); const button = event.target; button.textContent = 'Copied!'; setTimeout(() => { button.textContent = 'Copy code'; }, 2000); }} className="absolute top-2 right-2 px-3 py-1 text-xs bg-gray-700 text-gray-200 rounded">Copy code</button>
                <pre className="p-4 bg-gray-900 text-gray-100 text-sm overflow-x-auto"><code id={`${tabId}-code-block`}>{codeExamples[codeType]}</code></pre>
            </div>
        </div>
    );
}

const componentData = {
    codeExamples: {
        component1: {
            html: `<!-- Featured Card -->
<div class="relative w-full max-w-2xl">
    <div class="sw-bg-green w-[500px] min-h-[420px] p-12 relative z-0">
        <h2 class="text-5xl font-extrabold text-white mb-8 uppercase">Grants & funding</h2>
        <p class="text-white text-lg mb-8">Description text goes here...</p>
        <button class="sw-button sw-button-start h-12 px-8 uppercase tracking-widest text-sm font-bold">Find out more</button>
    </div>
    <div class="absolute top-0 -right-4 w-auto h-full z-10 sw-image-overlay-slant">
        <img src="path/to/image.jpg" class="object-cover w-full h-full">
    </div>
</div>`,
            css: `.sw-bg-green { background-color: #299D91; }
.sw-image-overlay-slant {
    clip-path: polygon(25% 0%, 100% 0%, 75% 100%, 0% 100%);
}`,
            react: `function FeaturedCard() {
    return (
        <div className="relative w-full max-w-2xl">
            <div className="bg-[#299D91] w-[500px] min-h-[420px] p-12 z-0">
                <h2 className="text-5xl font-black text-white mb-8 uppercase">Grants & Funding</h2>
                <button className="bg-[#E32434] text-white h-12 px-8 font-bold uppercase">Find out more</button>
            </div>
            <div className="absolute top-0 -right-4 w-auto h-full z-10 [clip-path:polygon(25%_0%,100%_0%,75%_100%,0%_100%)]">
                <img src="/path/to/img.jpg" className="object-cover h-full" />
            </div>
        </div>
    );
}`,
            tailwind: `<div class="relative w-full max-w-2xl">
    <div class="bg-[#299D91] w-[500px] min-h-[420px] p-12 z-0">
        <h2 class="text-5xl font-black text-white mb-8 uppercase leading-tight">GRANTS & FUNDING</h2>
        <button class="bg-[#E32434] text-white h-12 px-8 font-bold uppercase text-sm tracking-widest">FIND OUT MORE</button>
    </div>
    <div class="absolute top-0 -right-4 w-auto h-full z-10 [clip-path:polygon(25%_0%,100%_0%,75%_100%,0%_100%)]">
        <img src="..." class="object-cover h-full" />
    </div>
</div>`
        }
    }
};

ReactDOM.render(<CodeTabsComponent codeExamples={componentData.codeExamples.component1} tabId="component1" />, document.getElementById('component1-code-tabs'));
{% endraw %}
</script>
{% endblock %}